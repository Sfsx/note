# 计算机网络

## 子网掩码

### 什么是子网掩码

子网掩码是在 IPV4 地址资源紧缺的背景下为了解决 IP 地址分配而产生的虚拟 IP 技术。

### 为什么要子网掩码

1. 方便 VLAN 划分，隔离网络，降低传输数据大小
如果不分配子网，IP地址很多很多，将所有ip配置为一个映射表，那么他有 2^32个表项，即需要4GB内存才能放下。这样路由在转发数据的时候查表效率就非常非常慢

由于很多路由器是现代社会网络(互联网)结构中的“树枝”，它需要访问的大部分IP，只需要无脑转发给他上一级路由就好了

但中心路由器还是需要承担相当大的数据转发，这个时候有子网的话（例如 X.Y.0.0-X.Y.127.255 是一个子网），那么只需要匹配前几位，就可以直接转发了。大大降低查询时间。

2. 节约ip资源

3. 方便管理，划分网络单独管理

## Content Delivery Network 内容网络分发 (CDN)

### CDN 快速访问缘由

为什么我们不直接从源站直接获取数据，而要通过 CDN 这个中间转发

如果网络上的数据都是直接从源站返回，那么极有可能出现网络拥塞，服务器过载的情况

### CDN 原理

用户通过浏览器访问未使用 CDN 加速的流程

1. 用户在浏览器输入要访问的域名
2. 浏览器向 DNS 服务器请求该域名的对应的 IP
3. DNS 服务器返回该域名对应的 IP 地址给浏览器
4. 浏览器缓存该IP，并向 IP 对应的服务器发送请求内容
5. 服务器返回用户的请求内容到浏览器

用户通过浏览器访问使用 CDN 加速的网站的流程

1. 用在浏览器输入域名，浏览器发现本地没有 DNS 缓存，向 DNS 服务器请求
2. 由于 CDN 对域名进行了调整，DNS 服务器最终会将域名解析权交给 CNAME 指向的 CDN 专用的 DNS 服务器
3. CDN 的 DNS 负载均衡系统解析域名，把对用户响应速度最快的 IP 返回给用户
4. 浏览器缓存该IP，并向 IP 对应的服务器发送请求内容